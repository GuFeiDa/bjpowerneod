<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bjpowernode.crm.workbench.dao.ActivityDao">

    <!--List<Activity> findAllActivity();
        将市场活动的所有者不能显示为ID字段，需要进行关联查询。

        u.name as owner 将user表的name字段封装到Activity实体类的owner属性中

        select * from tbl_activity a , tbl_user u where a.owner = u.id;
    -->
    <select id="findAllActivity" resultType="Activity">
        select
        a.id,
        u.name as owner,
        a.name,
        a.startDate,
        a.endDate,
        a.cost,
        a.description,
        a.createTime,
        a.createBy
         from tbl_activity a inner join tbl_user u on a.owner = u.id
    </select>

    <!--void saveActivity(Activity activity);-->
    <insert id="saveActivity" >
        insert into tbl_activity
        (
        id,
        owner,
        name,
        startDate,
        endDate,
        cost,
        description,
        createTime,
        createBy
        )
        values
        (
        #{id},
        #{owner},
        #{name},
        #{startDate},
        #{endDate},
        #{cost},
        #{description},
        #{createTime},
        #{createBy}
        )
    </insert>

</mapper>